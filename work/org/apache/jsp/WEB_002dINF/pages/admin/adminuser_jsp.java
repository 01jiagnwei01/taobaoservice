/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.54
 * Generated at: 2014-11-30 07:42:08 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.pages.admin;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import com.gxkj.common.util.SystemGlobals;
import com.gxkj.common.util.SystemGlobals;

public final class adminuser_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(1);
    _jspx_dependants.put("/WEB-INF/pages/admin/../common/easyui-html5.jsp", Long.valueOf(1417330918970L));
  }

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write(" \r\n");
      out.write(" <!DOCTYPE html>\r\n");
      out.write("<html lang=\"zh\">\r\n");
      out.write("<head>");
      out.write("\r\n");
      out.write("<meta http-equiv=\"X-UA-Compatible\" content=\"IE=EmulateIE8\" content=\"ie=edge\"/>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n");
      out.write("<title>管理员管理 </title>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"");
      out.print(request.getContextPath() );
      out.write("/resources/icon/icon.css?3\">\r\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"");
      out.print(request.getContextPath() );
      out.write("/resources/easyui/themes/default/easyui.css\">\r\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"");
      out.print(request.getContextPath() );
      out.write("/resources/easyui/themes/icon.css\">\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.print(request.getContextPath() );
      out.write("/resources/easyui/jquery-1.10.2.min.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.print(request.getContextPath() );
      out.write("/resources/easyui/jquery.easyui.min.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.print(request.getContextPath() );
      out.write("/resources/easyui/locale/easyui-lang-zh_CN.js\"></script>\r\n");
      out.write("<style type=\"text/css\">\r\n");
      out.write("\t.mask {  \r\n");
      out.write("            position: absolute; top: 0px; filter: alpha(opacity=60); background-color: #777;\r\n");
      out.write("            z-index: 1002; left: 0px;\r\n");
      out.write("            opacity:0.5; -moz-opacity:0.5;\r\n");
      out.write("        }\r\n");
      out.write("</style>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\t function getPageArea() {\r\n");
      out.write("\t\tif (document.compatMode == 'BackCompat') {\r\n");
      out.write("\t\t\treturn {\r\n");
      out.write("\t\t\t\twidth: Math.max(document.body.scrollWidth, document.body.clientWidth),\r\n");
      out.write("\t\t\t\theight: Math.max(document.body.scrollHeight, document.body.clientHeight)\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\treturn {\r\n");
      out.write("\t\t\t\twidth: Math.max(document.documentElement.scrollWidth, document.documentElement.clientWidth),\r\n");
      out.write("\t\t\t\theight: Math.max(document.documentElement.scrollHeight, document.documentElement.clientHeight)\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\tjQuery.extend({ \r\n");
      out.write("\t\tshowMask: function(el, msg) {\r\n");
      out.write("\t\t\tif(!el)el =document.body;\r\n");
      out.write("\t\t\tvar _1c3=$(el);\r\n");
      out.write("\t\t\tmsg = msg?msg:\"\";\r\n");
      out.write("\t\t\tif(!_1c3.children(\"div.datagrid-mask\").length){\r\n");
      out.write("\t\t\t\t$(\"<div class=\\\"datagrid-mask\\\" style=\\\"display:block\\\"></div>\").appendTo(_1c3);\r\n");
      out.write("\t\t\t\tvar msg=$(\"<div class=\\\"datagrid-mask-msg\\\" style=\\\"display:block;left:50%\\\"></div>\").html(msg).appendTo(_1c3);\r\n");
      out.write("\t\t\t\tmsg.css(\"marginLeft\",-msg.outerWidth()/2);\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}, \r\n");
      out.write("\t\thideMask: function(el){ \r\n");
      out.write("\t\t\tif(!el)el =document.body;\r\n");
      out.write("\t\t   var _1c4=$(el);\r\n");
      out.write("\t\t   \tvar mask = _1c4.children(\"div.datagrid-mask-msg\");\r\n");
      out.write("\t\t   \tif(mask){\r\n");
      out.write("\t\t   \t\t_1c4.children(\"div.datagrid-mask-msg\").remove();\r\n");
      out.write("\t\t\t\t_1c4.children(\"div.datagrid-mask\").remove();\r\n");
      out.write("\t\t   \t}\r\n");
      out.write("\t\t\t\r\n");
      out.write("\t\t} \r\n");
      out.write("\t});\r\n");
      out.write("</script>");
      out.write("\r\n");
      out.write("</head>\n");
      out.write("<body class=\"easyui-layout\">\r\n");
      out.write("\t <div data-options=\"region:'center'\">\r\n");
      out.write("\t\t<table id=\"dg\"></table>\r\n");
      out.write("\t</div>\r\n");
      out.write("\t<div id=\"tb\" style=\"padding:5px;height:auto\">\r\n");
      out.write("\t\t<table width=\"100%\">\r\n");
      out.write("\t\t\t<tr width=\"100%\">\r\n");
      out.write("\t\t\t\t<td width=\"50%\">\r\n");
      out.write("\t\t\t\t\t真实姓名: <input class=\"easyui-spinner\" style=\"width:160px\" id=\"s_name\"/>\r\n");
      out.write("\t\t\t\t\t<a href=\"#\"  class=\"easyui-linkbutton\" iconCls=\"icon-search\" onclick=\"searchFn()\">查看</a>\r\n");
      out.write("\t\t\t\t</td>\r\n");
      out.write("\t\t\t\t<td align=\"right\" width=\"50%\">\r\n");
      out.write("\t\t\t\t\t<a id=\"addBtn\" href=\"#\" class=\"easyui-linkbutton\" iconCls=\"add_btn\" plain=\"true\" onclick=\"addFn()\">增加</a>\r\n");
      out.write("\t\t\t\t</td>\r\n");
      out.write("\t\t\t</tr>\r\n");
      out.write("\t\t</table>\r\n");
      out.write("\t</div>\r\n");
      out.write("\t<div id=\"adminuser_w\" class=\"easyui-window\" title=\"系统管理员\" data-options=\"modal:true,closed:true,iconCls:'icon-save',\r\n");
      out.write("\t\tcollapsible:false,minimizable:false,maximizable:false,resizable:false\" \r\n");
      out.write("\t\t\tstyle=\"width:600px;height:420px;padding:10px;\">\r\n");
      out.write("\t\t<div class=\"easyui-layout\" data-options=\"fit:true\">\r\n");
      out.write("\t\t\t<div data-options=\"region:'center',border:false\" id=\"content_layout\" >\r\n");
      out.write("\t\t\t\t<form id=\"ff\" method=\"post\">\r\n");
      out.write("\t\t\t\t\t \t<table>\r\n");
      out.write("\t\t\t\t\t \t\t<tr style=\"display: none;\">\r\n");
      out.write("\t\t\t\t    \t\t\t<td>id:</td>\r\n");
      out.write("\t\t\t\t    \t\t\t<td><input class=\"easyui-validatebox\" type=\"text\" id=\"id\" name=\"id\" data-options=\"required:false\"></input></td>\r\n");
      out.write("\t\t\t\t    \t\t</tr>\r\n");
      out.write("\t\t\t\t    \t\t<tr>\r\n");
      out.write("\t\t\t\t    \t\t\t<td>登陆名称:</td>\r\n");
      out.write("\t\t\t\t    \t\t\t<td>\r\n");
      out.write("\t\t\t\t    \t\t\t\t<input style=\"width:200px;\" class=\"easyui-validatebox\" type=\"text\" id=\"name\" name=\"name\" data-options=\"required:true\"></input>\r\n");
      out.write("\t\t\t\t    \t\t\t</td>\r\n");
      out.write("\t\t\t\t    \t\t</tr>\r\n");
      out.write("\t\t\t\t    \t\t<tr>\r\n");
      out.write("\t\t\t\t    \t\t\t<td>真实姓名:</td>\r\n");
      out.write("\t\t\t\t    \t\t\t<td>\r\n");
      out.write("\t\t\t\t    \t\t\t\t<input style=\"width:200px;\" class=\"easyui-validatebox\" type=\"text\" id=\"realName\" name=\"realName\" data-options=\"required:true\"></input>\r\n");
      out.write("\t\t\t\t    \t\t\t</td>\r\n");
      out.write("\t\t\t\t    \t\t</tr>\r\n");
      out.write("\t\t\t\t    \t\t<tr>\r\n");
      out.write("\t\t\t\t    \t\t\t<td>是否锁定:</td>\r\n");
      out.write("\t\t\t\t    \t\t\t<td>\r\n");
      out.write("\t\t\t\t    \t\t\t\t<select class=\"easyui-combobox\" id=\"status\" name=\"status\" style=\"width:200px;\"   data-options=\"editable:false,panelHeight:'auto',required:true\">\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t<option value=\"1\">启用</option>\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t<option value=\"2\">锁定</option> \r\n");
      out.write("\t\t\t\t\t\t\t\t\t</select>\r\n");
      out.write("\t\t\t\t    \t\t\t</td>\r\n");
      out.write("\t\t\t\t    \t\t</tr>\r\n");
      out.write("\t\t\t\t    \t\t<tr >\r\n");
      out.write("\t\t\t\t    \t\t\t<td>角色:</td>\r\n");
      out.write("\t\t\t\t    \t\t\t<td>\r\n");
      out.write("\t\t\t\t    \t\t\t\t <input id=\"roleid\" name=\"roleid\" class=\"easyui-combogrid\" style=\"width:200px;\" data-options=\"\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tpanelWidth: 380,\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\ttextField: 'name',\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tidField:'id',\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\teditable:false,\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tmode: 'remote',\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tmethod:'post',\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tfit:true,\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tpageSize:20,\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\turl:'");
      out.print(request.getContextPath() );
      out.write("/admin/role/dopage?status=1&d='+new Date().getTime(),\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tmethod: 'post',\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tcolumns: [[\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t{field:'id',title:'id',width:80,hidden:true},\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t{field:'name',title:'名字',width:120} \r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t]],\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tfitColumns: true,\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tpagination:true,\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tpageSize:20,\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tonBeforeLoad:function(param){\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t param['pageno'] =  param['page']-1;\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\tparam['limit']  = param['rows'];\r\n");
      out.write("\t\t\t\t\t\t\t\t\t  \t\treturn true ;\r\n");
      out.write("\t\t\t\t\t\t\t\t\t  \t},\r\n");
      out.write("\t\t\t\t\t\t\t\t\t  \tloadFilter:function(data){\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\tif(data  == null)return null;\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\tdata.total = data.totalRows;\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\tdata.rows = $.isArray(data.pageData)?data.pageData:[];\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\treturn data;\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\">\r\n");
      out.write("\t\t\t\t    \t\t\t</td>\r\n");
      out.write("\t\t\t\t    \t\t</tr>\r\n");
      out.write("\t\t\t\t    \t</table>\r\n");
      out.write("\t\t\t\t </form>\r\n");
      out.write("\t\t\t </div>\r\n");
      out.write("\t\t\t <div data-options=\"region:'south',border:false\" style=\"text-align:right;padding:5px 0 0;\">\r\n");
      out.write("\t\t\t\t\t<a class=\"easyui-linkbutton\" data-options=\"iconCls:'icon-ok'\" href=\"javascript:void(0)\" onclick=\"javascript:submitFormFn()\">保存</a>\r\n");
      out.write("\t\t\t\t\t<a class=\"easyui-linkbutton\" data-options=\"iconCls:'icon-cancel'\" href=\"javascript:void(0)\" onclick=\"javascript:closeWinFn()\">取消</a>\r\n");
      out.write("\t\t\t</div>\r\n");
      out.write("\t</div>\n");
      out.write("</body>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("var addUserBtn = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${_adminUser_.btnMap.userdoadd}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\"?true:false;\r\n");
      out.write("var updateUserBtn = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${_adminUser_.btnMap.userdoupdate}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\"?true:false;\r\n");
      out.write("var userdodel = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${_adminUser_.btnMap.userdodel}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\"?true:false;\r\n");
      out.write("var userdopage = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${_adminUser_.btnMap.userdopage}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\"?true:false;\r\n");
      out.write("var usersetpassword = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${_adminUser_.btnMap.usersetpassword}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\"?true:false;\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("$(function(){\r\n");
      out.write("\tif(!addUserBtn){\r\n");
      out.write("\t\t$(\"#addBtn\").hide();\r\n");
      out.write("\t}\r\n");
      out.write("\t\t\t$('#dg').datagrid({\r\n");
      out.write("\t\t\t \tborder:false,\r\n");
      out.write("\t\t\t\trownumbers:true,\r\n");
      out.write("\t\t\t\tcheckOnSelect:true,\r\n");
      out.write("\t\t\t\tfitColumns:true,\r\n");
      out.write("\t\t\t\tpagination:true,\r\n");
      out.write("\t\t\t\tfit:true,\r\n");
      out.write("\t\t\t\tpageSize:20,\r\n");
      out.write("\t\t\t\tsingleSelect:true,\r\n");
      out.write("\t\t\t\tmethod:'get',\r\n");
      out.write("\t\t\t  \turl:'");
      out.print(request.getContextPath() );
      out.write("/admin/user/dopage?d='+new Date().getTime(),\r\n");
      out.write("\t\t\t  \tqueryParams:{ },\r\n");
      out.write("\t\t\t  \tonBeforeLoad:function(param){\r\n");
      out.write("\t\t\t\t\tparam['pageno'] =  param['page']-1;\r\n");
      out.write("\t\t\t\t\tparam['pagesize']  = param['rows'];\r\n");
      out.write("\t\t\t\t\t\r\n");
      out.write("\t\t\t  \t\treturn true ;\r\n");
      out.write("\t\t\t  \t},\r\n");
      out.write("\t\t\t  \tonDblClickRow:function(rowIndex, rowData){\r\n");
      out.write("\t\t\t  \t\t\t//updateRowIndex = rowIndex;\r\n");
      out.write("\t\t\t\t\t\t//getRoleInfoById(rowData['roleId']);\t\r\n");
      out.write("\t\t\t  \t},\r\n");
      out.write("\t\t\t\tcolumns:[[ \r\n");
      out.write("\t\t\t\t\t{field:'id',title:'id'},\r\n");
      out.write("\t\t\t\t\t{field:'name',title:'登录名' ,width:100},\r\n");
      out.write("\t\t\t\t\t{field:'realName',title:'真实姓名',width:200},\r\n");
      out.write("\t\t\t\t\t{field:'role',title:'角色',width:200,formatter:roleFormat},\r\n");
      out.write("\t\t\t\t\t{field:'status',title:'状态' ,width:50,formatter:statusFormat},\r\n");
      out.write("\t\t\t\t\t{field:'opt',title:'操作' ,width:200,formatter:optFormat} \r\n");
      out.write("\t\t\t\t]],\r\n");
      out.write("\t\t\t\ttoolbar: '#tb',\r\n");
      out.write("\t\t\t\tloadFilter:function(data){\r\n");
      out.write("\t\t\t\t\tvar result = data.result;\r\n");
      out.write("\t\t\t\t\tif(!result){\r\n");
      out.write("\t\t\t\t\t\treturn {total:0,rows:[]};\r\n");
      out.write("\t\t\t\t\t}else {\r\n");
      out.write("\t\t\t\t\t\tvar obj = {\r\n");
      out.write("\t\t\t\t\t\t\ttotal:data.entity.totalRows,\r\n");
      out.write("\t\t\t\t\t\t\trows:data.entity.pageData\r\n");
      out.write("\t\t\t\t\t\t};\r\n");
      out.write("\t\t\t\t\t\treturn obj;\r\n");
      out.write("\t\t\t\t\t} \r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t\t\r\n");
      out.write("\t\t\tvar pager = $('#dg').datagrid(\"getPager\");\r\n");
      out.write("\t\t\tpager.pagination({\r\n");
      out.write("\t\t\t\t'onBeforeRefresh':function(){\r\n");
      out.write("\t\t\t\t\treturn true;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}); \r\n");
      out.write("});\r\n");
      out.write("function statusFormat(value,row,index){\r\n");
      out.write("\tif(value == 1) {\r\n");
      out.write("\t\treturn \"启用\";\r\n");
      out.write("\t}else if(value == 2) {\r\n");
      out.write("\t\treturn \"锁定\";\r\n");
      out.write("\t}\r\n");
      out.write("\treturn \"\";\t\r\n");
      out.write("}\r\n");
      out.write("function searchFn(){\r\n");
      out.write("\t\tif(!userdopage){\r\n");
      out.write("\t\t\t $.messager.alert('系统提示','您没有权限访问!','info');\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tvar s_name = $(\"#s_name\").val();\r\n");
      out.write("\t\t$('#dg').datagrid('load',{\r\n");
      out.write("\t\t\t\trealname:s_name,\r\n");
      out.write("\t\t\t\td:new Date().getTime()\r\n");
      out.write("\t\t});\r\n");
      out.write("}\r\n");
      out.write("var saveType = \"add\";\r\n");
      out.write("function closeWinFn(){\r\n");
      out.write("\t\t\t$('#w').window('close');\r\n");
      out.write("}\r\n");
      out.write("function addFn(){\r\n");
      out.write("\tsaveType = \"add\";\r\n");
      out.write("\t $(\"#ff\").form(\"reset\");\r\n");
      out.write("\t $('#adminuser_w').window('open').panel('setTitle',\"增加管理员\");\r\n");
      out.write("}\r\n");
      out.write("function optFormat(v,row,index){\r\n");
      out.write("\tvar btns = [];\r\n");
      out.write("\tif(updateUserBtn){\r\n");
      out.write("\t\tbtns.push('<a class=\"easyui-linkbutton l-btn l-btn-plain\" onclick=\"updateFn(\\''+row['id']+'\\')\" href=\"#\" plain=\"true\" iconCls=\"update_btn\"><span class=\"l-btn-left\"><span class=\"l-btn-text update_btn l-btn-icon-left\">修改</span></span></a>');\r\n");
      out.write("\t}\r\n");
      out.write("\tif(userdodel){\r\n");
      out.write("\t\tbtns.push('<a class=\"easyui-linkbutton l-btn l-btn-plain\" onclick=\"delFn(\\''+row['id']+'\\')\" href=\"#\" plain=\"true\" iconCls=\"del_btn\"><span class=\"l-btn-left\"><span class=\"l-btn-text del_btn l-btn-icon-left\">删除</span></span></a>');\r\n");
      out.write("\t}\r\n");
      out.write("\tif(usersetpassword){\r\n");
      out.write("\t\tbtns.push('<a class=\"easyui-linkbutton l-btn l-btn-plain\" onclick=\"passwordRest(\\''+row['id']+'\\')\" href=\"#\" plain=\"true\" iconCls=\"lock\"><span class=\"l-btn-left\"><span class=\"l-btn-text lock l-btn-icon-left\">密码初始化</span></span></a>');\r\n");
      out.write("\t}\r\n");
      out.write("\treturn btns.join(\"&nbsp;\");\r\n");
      out.write("}\r\n");
      out.write("function roleFormat(v,row,index){\r\n");
      out.write("\tif(!v)return \"\";\r\n");
      out.write("\treturn v.name;\r\n");
      out.write("}\r\n");
      out.write("function updateFn(id){\r\n");
      out.write("\t$(\"#ff\").form(\"reset\");\r\n");
      out.write("\tupdateRowIndex = -1;\r\n");
      out.write("\tsaveType = \"update\";\r\n");
      out.write("\tvar rows = $(\"#dg\").datagrid(\"getRows\");\r\n");
      out.write("\tvar row = null;\r\n");
      out.write("\tfor(var i=0;i<rows.length;i++){\r\n");
      out.write("\t\tif(rows[i]['id'] == id){\r\n");
      out.write("\t\t\trow = rows[i];\r\n");
      out.write("\t\t\tbreak;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\tvar rowIndex = \t$('#dg').datagrid(\"getRowIndex\",row);\r\n");
      out.write("\tupdateRowIndex = rowIndex;\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("\t$(\"#id\").val(row['id']);\r\n");
      out.write("\t$(\"#name\").val(row['name']);\r\n");
      out.write("\t$(\"#realName\").val(row['realName']);\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("\t$('#name').validatebox(\"validate\");\r\n");
      out.write("\t$('#realName').validatebox(\"validate\");\r\n");
      out.write("\t\r\n");
      out.write("\t $('#status').combobox('setValue', row['status']);\r\n");
      out.write("\t if(row['role']){\r\n");
      out.write("\t \tvar role = row['role'];\r\n");
      out.write("\t \tvar roleID =role.id;\r\n");
      out.write("\t \tvar roleName = role.name;\r\n");
      out.write("\t \t $('#roleid').combogrid('setValue', roleID);\r\n");
      out.write("\t\t $('#roleid').combogrid('setText', roleName);\r\n");
      out.write("\t }\r\n");
      out.write("\t\r\n");
      out.write("\t$('#adminuser_w').window('open').panel('setTitle',\"修改管理员\") ;\r\n");
      out.write("\t$('#adminuser_w').window('center');\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("}\r\n");
      out.write("function closeWinFn(){\r\n");
      out.write("\t $('#adminuser_w').window('close');\r\n");
      out.write("}\r\n");
      out.write("function delFn(id){\r\n");
      out.write("\tvar rows = $(\"#dg\").datagrid(\"getRows\");\r\n");
      out.write("\tvar row = null;\r\n");
      out.write("\tfor(var i=0;i<rows.length;i++){\r\n");
      out.write("\t\tif(rows[i]['id'] == id){\r\n");
      out.write("\t\t\trow = rows[i];\r\n");
      out.write("\t\t\tbreak;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\tvar delRowIndex = \t$('#dg').datagrid(\"getRowIndex\",row);\r\n");
      out.write("\t $.messager.confirm('系统提示', '您确定要删除这条记录吗?', function(r){\r\n");
      out.write("\t\tif (r){\r\n");
      out.write("\t\t\t\tvar url = \"");
      out.print(SystemGlobals.getPreference("system.index.url") );
      out.write("/admin/user/dodel\";\r\n");
      out.write("\t\t  \t\t $.ajax({\r\n");
      out.write("\t\t  \t  \t  type:'post',\r\n");
      out.write("\t\t\t\t  url: url,\r\n");
      out.write("\t\t\t\t  data:{\r\n");
      out.write("\t\t\t\t  \tid:id,\r\n");
      out.write("\t\t\t\t  \tstatus:4\r\n");
      out.write("\t\t\t\t  },\r\n");
      out.write("\t\t\t\t  context: document.body,\r\n");
      out.write("\t\t\t\t  success:function(json){\r\n");
      out.write("\t\t\t\t \t$('#dg').datagrid(\"deleteRow\",delRowIndex);\r\n");
      out.write("\t\t\t  \t\t$('#dg').datagrid('acceptChanges');\r\n");
      out.write("\t\t\t\t \t $.messager.alert('系统提示','删除成功!','info',closeWinFn);\r\n");
      out.write("\t\t\t\t\t\r\n");
      out.write("\t\t\t\t  },\r\n");
      out.write("\t\t\t\t  error:function(xhr,textStatus,errorThrown){\r\n");
      out.write("\t\t\t\t  \t\tvar responseText = xhr.responseText;\r\n");
      out.write("\t\t\t\t    \t$.messager.alert('系统提示','删除失败，请刷新后重试!','error');\r\n");
      out.write("\t\t\t\t  \r\n");
      out.write("\t\t\t\t  } \r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t}}\r\n");
      out.write("\t);\r\n");
      out.write("}\t\t\t \r\n");
      out.write("function submitFormFn(){\r\n");
      out.write("\tvar u_id = $(\"#id\").val();\r\n");
      out.write("\tvar u_name = $(\"#name\").val();\r\n");
      out.write("\tvar realName = $(\"#realName\").val();\r\n");
      out.write("\tvar status = $(\"#status\").combobox(\"getValue\");\r\n");
      out.write("\tvar roleid = $('#roleid').combogrid('getValue');\r\n");
      out.write("\tvar roleName = $('#roleid').combogrid('getText');\r\n");
      out.write("\tvar status = $('#status').combogrid('getValue');\r\n");
      out.write("\tvar saveObj = {};\r\n");
      out.write("\tsaveObj.id=$.trim(u_id).length==0?0:u_id;\r\n");
      out.write("\tsaveObj.name= u_name;\r\n");
      out.write("\tsaveObj.realName=realName;\r\n");
      out.write("\tsaveObj.roleid = roleid;\r\n");
      out.write("\tsaveObj.roleName = roleName; \r\n");
      out.write("\tsaveObj.status=status;\r\n");
      out.write("\tif(saveType == 'add'){ insertIntoDb(saveObj); }else if(saveType == 'update'){ updateIntoDb(saveObj); }\r\n");
      out.write("}\r\n");
      out.write("function insertIntoDb(saveObj){\r\n");
      out.write("\t\t\tvar url =  \"");
      out.print(SystemGlobals.getPreference("system.index.url") );
      out.write("/admin/user/doadd\";\r\n");
      out.write("\t\t  \t $.ajax({\r\n");
      out.write("\t\t  \t  \t  type:'post',\r\n");
      out.write("\t\t\t\t  url: url,\r\n");
      out.write("\t\t\t\t  context: document.body,\r\n");
      out.write("\t\t\t\t  data:saveObj,\r\n");
      out.write("\t\t\t\t  success:function(json){\r\n");
      out.write("\t\t\t\t   \t json = $.parseJSON(json);\r\n");
      out.write("\t\t\t\t   \t json = json.entity;\r\n");
      out.write("\t\t\t\t \t $('#dg').datagrid('appendRow',json);\r\n");
      out.write("\t\t\t\t \t $.messager.alert('系统提示','保存成功!','info',closeWinFn);\r\n");
      out.write("\t\t\t\t  },\r\n");
      out.write("\t\t\t\t  error:function(xhr,textStatus,errorThrown){\r\n");
      out.write("\t\t\t\t  \t\tvar responseText = xhr.responseText;\r\n");
      out.write("\t\t\t\t    \t$.messager.alert('系统提示','保存失败，请刷新后重试!','error');\r\n");
      out.write("\t\t\t\t  \r\n");
      out.write("\t\t\t\t  } \r\n");
      out.write("\t\t\t});\r\n");
      out.write("}\r\n");
      out.write("function updateIntoDb(saveObj){\r\n");
      out.write("\t\t\tvar url =  \"");
      out.print(SystemGlobals.getPreference("system.index.url") );
      out.write("/admin/user/doupdate\";\r\n");
      out.write("\t\t  \t $.ajax({\r\n");
      out.write("\t\t  \t  \t  type:'post',\r\n");
      out.write("\t\t\t\t  url: url,\r\n");
      out.write("\t\t\t\t  context: document.body,\r\n");
      out.write("\t\t\t\t  data:saveObj,\r\n");
      out.write("\t\t\t\t  success:function(json){\r\n");
      out.write("\t\t\t\t   \t\tjson = $.parseJSON(json);\r\n");
      out.write("\t\t\t\t   \t\tjson = json.entity;\r\n");
      out.write("\t\t\t\t\t  \t $('#dg').datagrid('updateRow',{\r\n");
      out.write("\t\t\t\t\t  \t \tindex:updateRowIndex,\r\n");
      out.write("\t\t\t\t\t  \t \trow:json\r\n");
      out.write("\t\t\t\t\t  \t });\r\n");
      out.write("\t\t\t\t\t  \t  $('#dg').datagrid('selectRow',updateRowIndex);\r\n");
      out.write("\t\t\t\t\t \t $.messager.alert('系统提示','保存成功!','info',closeWinFn);\r\n");
      out.write("\t\t\t\t\t\r\n");
      out.write("\t\t\t\t  },\r\n");
      out.write("\t\t\t\t  error:function(xhr,textStatus,errorThrown){\r\n");
      out.write("\t\t\t\t  \t\tvar responseText = xhr.responseText;\r\n");
      out.write("\t\t\t\t    \t$.messager.alert('系统提示','保存失败，请刷新后重试!','error');\r\n");
      out.write("\t\t\t\t  \r\n");
      out.write("\t\t\t\t  } \r\n");
      out.write("\t\t\t});\r\n");
      out.write("}\r\n");
      out.write("var initPassword = \"111111\";\r\n");
      out.write("function passwordRest(id){\r\n");
      out.write("\t\tvar url = \"");
      out.print(request.getContextPath()  );
      out.write("/admin/user/setpassword\";\r\n");
      out.write("  \t\t $.ajax({\r\n");
      out.write("  \t  \t  type:'get',\r\n");
      out.write("\t\t  url: url,\r\n");
      out.write("\t\t  context: document.body,\r\n");
      out.write("\t\t  data:{\r\n");
      out.write("\t\t  \td:new Date().getTime(),\r\n");
      out.write("\t\t  \t id:id  ,\r\n");
      out.write("\t\t  \t password:initPassword\r\n");
      out.write("\t\t  },\r\n");
      out.write("\t\t  success:function(json){\r\n");
      out.write("\t\t \t // json = eval(\"(\"+json+\")\");\r\n");
      out.write("\t\t \t  \r\n");
      out.write("\t\t\t var success = json['result'];\r\n");
      out.write("\t\t\t if(success){\r\n");
      out.write("\t\t\t \t $.messager.alert('系统提示','密码重置成功!新密码为'+initPassword,'info',function(){ });\r\n");
      out.write("\t\t\t }else{\r\n");
      out.write("\t\t\t \t$.messager.alert('系统提示','密码重置失败，请刷新后重试!','error');\r\n");
      out.write("\t\t\t }\r\n");
      out.write("\t\t \t\r\n");
      out.write("\t\t\t\r\n");
      out.write("\t\t  },\r\n");
      out.write("\t\t  error:function(xhr,textStatus,errorThrown){\r\n");
      out.write("\t\t  \t\tvar responseText = xhr.responseText;\r\n");
      out.write("\t\t    \t$.messager.alert('系统提示','密码重置失败，请刷新后重试!','error');\r\n");
      out.write("\t\t  \r\n");
      out.write("\t\t  } \r\n");
      out.write("\t});\r\n");
      out.write("\t}\r\n");
      out.write("/***/\r\n");
      out.write("\r\n");
      out.write("\t</script>\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
